<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Recrutamento - GTA RP</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        :root {
            --bg-primary: rgba(15, 23, 42, 0.95);
            --bg-secondary: rgba(30, 41, 59, 0.9);
            --bg-glass: rgba(51, 65, 85, 0.6);
            --bg-card: rgba(30, 41, 59, 0.7);
            --border-color: rgba(148, 163, 184, 0.2);
            --border-accent: #f59e0b;
            --text-primary: #f1f5f9;
            --text-secondary: #94a3b8;
            --accent: #3b82f6;
            --accent-glow: rgba(59, 130, 246, 0.5);
            --success: #22c55e;
            --error: #ef4444;
            --warning: #f59e0b;
            --gradient-1: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --gradient-2: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
            --gradient-3: linear-gradient(135deg, #22c55e 0%, #16a34a 100%);
            --gradient-4: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
        }
        
        [data-theme="light"] {
            --bg-primary: rgba(248, 250, 252, 0.95);
            --bg-secondary: rgba(241, 245, 249, 0.9);
            --bg-glass: rgba(226, 232, 240, 0.8);
            --bg-card: rgba(255, 255, 255, 0.8);
            --border-color: rgba(100, 116, 139, 0.2);
            --border-accent: #d97706;
            --text-primary: #0f172a;
            --text-secondary: #475569;
            --accent: #2563eb;
            --accent-glow: rgba(37, 99, 235, 0.3);
        }
        
        @keyframes moveCamo {
            0% { background-position: 0% 0%; }
            50% { background-position: 100% 100%; }
            100% { background-position: 0% 0%; }
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            20%, 60% { transform: translateX(-3px); }
            40%, 80% { transform: translateX(3px); }
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        @keyframes confetti-fall {
            0% { transform: translateY(-100vh) rotate(0deg); opacity: 1; }
            100% { transform: translateY(100vh) rotate(720deg); opacity: 0; }
        }
        
        @keyframes confetti-shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(15px); }
            75% { transform: translateX(-15px); }
        }
        
        .confetti-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 9998;
            overflow: hidden;
        }
        
        .confetti {
            position: absolute;
            width: 12px;
            height: 12px;
            top: -20px;
            animation: confetti-fall 4s ease-out forwards, confetti-shake 0.5s ease-in-out infinite;
        }
        
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            min-height: 100vh;
            color: var(--text-primary);
            padding: 30px;
            padding-left: 90px;
            font-size: 14px;
            background: 
                radial-gradient(circle at 20% 20%, rgba(99, 102, 241, 0.15) 0%, transparent 50%),
                radial-gradient(circle at 80% 80%, rgba(245, 158, 11, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 50% 50%, rgba(59, 130, 246, 0.08) 0%, transparent 70%),
                linear-gradient(180deg, #0f172a 0%, #1e293b 100%);
            background-attachment: fixed;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        [data-theme="light"] body, body[data-theme="light"] {
            background: 
                radial-gradient(circle at 20% 20%, rgba(99, 102, 241, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 80% 80%, rgba(245, 158, 11, 0.08) 0%, transparent 50%),
                linear-gradient(180deg, #f8fafc 0%, #e2e8f0 100%);
        }
        
        /* Side Navigation */
        .side-nav {
            position: fixed;
            left: 0;
            top: 0;
            width: 70px;
            height: 100vh;
            background: var(--bg-primary);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border-right: 1px solid var(--border-color);
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px 0;
            z-index: 1000;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }
        .nav-item {
            width: 46px;
            height: 46px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 14px;
            margin: 4px 0;
            cursor: pointer;
            font-size: 0.8em;
            font-weight: 600;
            color: var(--text-secondary);
            background: var(--bg-glass);
            border: 1px solid var(--border-color);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }
        .nav-item::before {
            content: '';
            position: absolute;
            inset: 0;
            background: var(--gradient-1);
            opacity: 0;
            transition: opacity 0.3s;
        }
        .nav-item:hover::before { opacity: 1; }
        .nav-item:hover { 
            color: #fff; 
            transform: scale(1.1) translateX(3px);
            border-color: transparent;
            box-shadow: 0 10px 30px -10px rgba(99, 102, 241, 0.5);
        }
        .nav-item.active::before { opacity: 1; }
        .nav-item.active { color: #fff; border-color: transparent; }
        .nav-item span { position: relative; z-index: 1; }
        .nav-divider { width: 35px; height: 2px; background: var(--border-color); margin: 12px 0; border-radius: 1px; }
        .theme-toggle {
            margin-top: auto;
            font-size: 1.3em;
        }
        .container { max-width: 1500px; margin: 0 auto; }
        .header {
            text-align: center;
            padding: 30px 40px;
            background: var(--bg-card);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid var(--border-color);
            border-radius: 24px;
            margin-bottom: 30px;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
            position: relative;
            overflow: hidden;
        }
        .header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: var(--gradient-2);
        }
        .header h1 { 
            font-size: 2.2em; 
            background: var(--gradient-2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 10px; 
            letter-spacing: -0.5px;
            font-weight: 800;
        }
        .header p { color: var(--text-secondary); font-size: 1.05em; letter-spacing: 0.3px; font-weight: 500; }
        
        /* Progress Counter */
        .progress-counter {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 20px;
            margin-top: 20px;
            padding-top: 20px;
            border-top: 1px solid var(--border-color);
        }
        .counter-text { 
            color: var(--accent); 
            font-weight: 700; 
            font-size: 1.05em;
        }
        .mini-progress {
            width: 220px;
            height: 10px;
            background: var(--bg-secondary);
            border-radius: 10px;
            overflow: hidden;
            box-shadow: inset 0 2px 4px rgba(0,0,0,0.2);
        }
        .mini-progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #ef4444, #f59e0b, #22c55e);
            border-radius: 10px;
            transition: width 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 0 20px rgba(34, 197, 94, 0.4);
        }
        .player-info {
            background: var(--bg-card);
            backdrop-filter: blur(20px);
            border: 1px solid var(--border-color);
            padding: 24px 32px;
            border-radius: 20px;
            margin-bottom: 30px;
            display: flex;
            gap: 24px;
            align-items: center;
            justify-content: center;
            flex-wrap: wrap;
            box-shadow: 0 10px 40px -10px rgba(0, 0, 0, 0.2);
        }
        .player-info label { 
            color: var(--border-accent); 
            font-weight: 700; 
            font-size: 1.05em;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        .player-info input {
            padding: 14px 20px;
            border: 2px solid var(--border-color);
            border-radius: 12px;
            background: var(--bg-secondary);
            color: var(--text-primary);
            width: 220px;
            font-size: 1em;
            font-weight: 500;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        .player-info input:focus { 
            outline: none; 
            border-color: var(--accent); 
            box-shadow: 0 0 0 4px var(--accent-glow);
            transform: translateY(-2px);
        }
        
        .etapa {
            background: var(--bg-card);
            backdrop-filter: blur(20px);
            border: 1px solid var(--border-color);
            border-radius: 24px;
            margin-bottom: 30px;
            padding: 28px;
            scroll-margin-top: 30px;
            box-shadow: 0 20px 50px -15px rgba(0, 0, 0, 0.2);
            position: relative;
            overflow: hidden;
        }
        .etapa::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: var(--gradient-1);
        }
        .etapa-header {
            color: var(--text-primary);
            font-weight: 800;
            font-size: 1.4em;
            margin-bottom: 24px;
            padding-bottom: 16px;
            border-bottom: 1px solid var(--border-color);
            letter-spacing: -0.3px;
            display: flex;
            align-items: center;
            gap: 12px;
        }
        .etapa-header::after {
            content: '';
            flex: 1;
            height: 2px;
            background: linear-gradient(90deg, var(--border-color), transparent);
            margin-left: 15px;
        }
        .questions-row {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(340px, 1fr));
            gap: 24px;
        }
        .question {
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: 20px;
            padding: 24px;
            display: flex;
            flex-direction: column;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            min-height: 240px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
            position: relative;
            overflow: hidden;
        }
        .question::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 4px;
            height: 100%;
            background: var(--gradient-1);
            opacity: 0;
            transition: opacity 0.3s;
        }
        .question:hover::before { opacity: 1; }
        .question:hover { 
            border-color: var(--accent); 
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.25);
            transform: translateY(-5px);
        }
        .question.answered::before { 
            background: var(--gradient-3);
            opacity: 1;
        }
        .question.answered { 
            border-color: var(--success); 
            box-shadow: 0 0 30px rgba(34, 197, 94, 0.2);
        }
        .question-text { 
            font-weight: 600; 
            font-size: 1.1em; 
            margin-bottom: 16px; 
            color: var(--text-primary);
            line-height: 1.6;
            letter-spacing: -0.2px;
        }
        .question-number { 
            background: var(--gradient-2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-size: 1.4em; 
            font-weight: 800;
            margin-right: 10px;
        }
        .correct-answer {
            background: linear-gradient(135deg, rgba(59, 130, 246, 0.1) 0%, rgba(99, 102, 241, 0.15) 100%);
            border: 1px solid rgba(59, 130, 246, 0.3);
            border-left: 4px solid var(--accent);
            padding: 18px 20px;
            border-radius: 14px;
            margin-bottom: 20px;
            font-size: 1em;
            color: var(--accent);
            line-height: 1.7;
            flex: 1;
            font-weight: 500;
        }
        .answer-options { display: flex; gap: 14px; }
        .answer-option {
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 16px 24px;
            border-radius: 14px;
            cursor: pointer;
            font-weight: 700;
            font-size: 1em;
            border: 2px solid;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            text-transform: uppercase;
            letter-spacing: 1.5px;
            position: relative;
            overflow: hidden;
        }
        .answer-option input { display: none; }
        .option-correct { 
            background: linear-gradient(135deg, #166534 0%, #15803d 100%);
            border-color: #22c55e; 
            color: #fff; 
        }
        .option-correct:hover { 
            background: linear-gradient(135deg, #15803d 0%, #16a34a 100%);
            box-shadow: 0 10px 30px -5px rgba(34, 197, 94, 0.5);
            transform: translateY(-3px);
        }
        .option-incorrect { 
            background: linear-gradient(135deg, #991b1b 0%, #b91c1c 100%);
            border-color: #ef4444; 
            color: #fff; 
        }
        .option-incorrect:hover { 
            background: linear-gradient(135deg, #b91c1c 0%, #dc2626 100%);
            box-shadow: 0 10px 30px -5px rgba(239, 68, 68, 0.5);
            transform: translateY(-3px);
        }
        .selected-correct { 
            background: linear-gradient(135deg, #22c55e 0%, #16a34a 100%) !important;
            border-color: #4ade80 !important; 
            box-shadow: 0 0 30px rgba(34, 197, 94, 0.6);
            animation: pulse 0.4s ease;
        }
        .selected-incorrect { 
            background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%) !important;
            border-color: #f87171 !important; 
            box-shadow: 0 0 30px rgba(239, 68, 68, 0.6);
            animation: shake 0.4s ease;
        }
        
        .btn-container { text-align: center; margin: 35px 0; }
        .btn {
            padding: 16px 40px;
            font-size: 1.05em;
            font-weight: 700;
            border: none;
            border-radius: 14px;
            cursor: pointer;
            margin: 8px;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
            letter-spacing: 0.5px;
        }
        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: left 0.5s;
        }
        .btn:hover::before { left: 100%; }
        .btn:hover { transform: translateY(-3px); box-shadow: 0 15px 35px -5px rgba(0,0,0,0.4); }
        .btn-primary { 
            background: var(--gradient-3);
            color: #fff; 
        }
        .btn-primary:hover { box-shadow: 0 15px 35px -5px rgba(34, 197, 94, 0.5); }
        .btn-secondary { 
            background: var(--bg-glass); 
            border: 2px solid var(--border-accent); 
            color: var(--border-accent); 
        }
        .btn-pdf { 
            background: var(--gradient-1);
            color: #fff; 
        }
        .btn-pdf:hover { box-shadow: 0 15px 35px -5px rgba(99, 102, 241, 0.5); }
        
        .result-container {
            display: none;
            background: var(--bg-card);
            backdrop-filter: blur(20px);
            border: 1px solid var(--border-color);
            padding: 40px;
            border-radius: 28px;
            margin-top: 30px;
            animation: fadeIn 0.6s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 25px 60px -15px rgba(0, 0, 0, 0.3);
            position: relative;
            overflow: hidden;
        }
        .result-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 5px;
            background: var(--gradient-2);
        }
        .result-header { text-align: center; margin-bottom: 35px; }
        .result-header h2 { font-size: 3em; letter-spacing: -1px; font-weight: 900; }
        .result-approved { 
            background: var(--gradient-3);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            filter: drop-shadow(0 0 30px rgba(34, 197, 94, 0.5));
            animation: pulse 1.5s ease infinite;
        }
        .result-failed { 
            background: var(--gradient-4);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            filter: drop-shadow(0 0 30px rgba(239, 68, 68, 0.5));
        }
        .stats-grid {
            display: flex;
            justify-content: center;
            gap: 24px;
            margin-bottom: 25px;
        }
        .stat-card { 
            background: var(--bg-secondary); 
            border: 1px solid var(--border-color);
            padding: 30px 50px; 
            border-radius: 20px; 
            text-align: center;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }
        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
        }
        .stat-correct::before { background: var(--gradient-3); }
        .stat-incorrect::before { background: var(--gradient-4); }
        .stat-percentage::before { background: var(--gradient-1); }
        .stat-card:hover { transform: translateY(-5px) scale(1.02); }
        .stat-value { font-size: 3.5em; font-weight: 900; letter-spacing: -2px; }
        .stat-label { color: var(--text-secondary); font-size: 1em; margin-top: 10px; text-transform: uppercase; letter-spacing: 2px; font-weight: 600; }
        .stat-correct .stat-value { 
            background: var(--gradient-3);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        .stat-incorrect .stat-value { 
            background: var(--gradient-4);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        .stat-percentage .stat-value { 
            background: var(--gradient-1);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        .progress-bar { 
            width: 100%; 
            height: 20px; 
            background: var(--bg-secondary); 
            border: 1px solid var(--border-color);
            border-radius: 14px; 
            overflow: hidden; 
            margin: 25px 0;
            box-shadow: inset 0 2px 6px rgba(0,0,0,0.2);
        }
        .progress-fill { 
            height: 100%; 
            background: linear-gradient(90deg, #ef4444, #f59e0b, #22c55e); 
            border-radius: 12px; 
            display: flex; 
            align-items: center; 
            justify-content: center; 
            font-weight: 700; 
            color: #fff; 
            font-size: 0.9em;
            text-shadow: 0 1px 3px rgba(0,0,0,0.3);
            box-shadow: 0 0 20px rgba(34, 197, 94, 0.4);
        }
        .review-grid { 
            display: flex; 
            flex-wrap: wrap;
            gap: 8px; 
            margin-top: 15px; 
        }
        .review-item { 
            background: var(--bg-secondary); 
            border: 2px solid var(--border-color);
            padding: 8px 14px; 
            border-radius: 10px; 
            font-size: 0.9em; 
            display: flex; 
            gap: 10px;
            align-items: center;
            font-weight: 600;
            transition: all 0.2s;
        }
        .review-item:hover { transform: scale(1.05); }
        .review-item.correct { border-color: var(--success); background: rgba(34, 197, 94, 0.1); }
        .review-item.incorrect { border-color: var(--error); background: rgba(239, 68, 68, 0.1); }
        .review-item.not-answered { border-color: var(--warning); background: rgba(245, 158, 11, 0.1); }
        .review-status { font-weight: 700; }
        .review-status.correct { color: var(--success); }
        .review-status.incorrect { color: var(--error); }
        .review-status.not-answered { color: var(--warning); }
        .credits { 
            text-align: center; 
            margin-top: 40px; 
            color: var(--text-secondary); 
            font-size: 1.1em; 
            padding: 28px; 
            background: var(--bg-card); 
            backdrop-filter: blur(20px);
            border: 1px solid var(--border-color); 
            border-radius: 20px;
        }
        .credits span { 
            background: var(--gradient-2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-weight: 800; 
            font-size: 1.6em; 
        }
        
        /* Mobile Responsiveness */
        @media (max-width: 768px) {
            body { padding: 20px; padding-left: 20px; padding-bottom: 85px; }
            .side-nav {
                top: auto;
                bottom: 0;
                left: 0;
                width: 100%;
                height: 70px;
                flex-direction: row;
                justify-content: center;
                border-right: none;
                border-top: 1px solid var(--border-color);
                border-radius: 20px 20px 0 0;
            }
            .nav-item { width: 44px; height: 44px; font-size: 0.75em; }
            .nav-divider { width: 1px; height: 30px; margin: 0 8px; }
            .theme-toggle { margin-top: 0; margin-left: auto; }
            .questions-row { grid-template-columns: 1fr; }
            .header h1 { font-size: 1.5em; }
            .player-info { flex-direction: column; gap: 15px; }
            .player-info input { width: 100%; }
            .stats-grid { flex-direction: column; gap: 15px; }
            .stat-card { padding: 20px 30px; }
            .mini-progress { width: 160px; }
            .result-header h2 { font-size: 2em; }
        }
        
        @media (max-width: 480px) {
            .question { padding: 18px; min-height: 200px; }
            .question-text { font-size: 1em; }
            .correct-answer { font-size: 0.95em; padding: 14px; }
            .answer-option { font-size: 0.9em; padding: 12px 16px; }
            .stat-value { font-size: 2.5em; }
        }
    </style>
</head>
<body>
    <!-- Confetti Container -->
    <div class="confetti-container" id="confetti-container"></div>
    
    <!-- Side Navigation -->
    <nav class="side-nav">
        <div class="nav-item" onclick="scrollToEtapa(1)" title="Etapa 1">E1</div>
        <div class="nav-item" onclick="scrollToEtapa(2)" title="Etapa 2">E2</div>
        <div class="nav-item" onclick="scrollToEtapa(3)" title="Etapa 3">E3</div>
        <div class="nav-item" onclick="scrollToEtapa(4)" title="Etapa 4">E4</div>
        <div class="nav-item" onclick="scrollToEtapa(5)" title="Etapa 5">E5</div>
        <div class="nav-item" onclick="scrollToEtapa(6)" title="Etapa 6">E6</div>
        <div class="nav-divider"></div>
        <div class="nav-item" onclick="scrollToResult()" title="Resultado">üìä</div>
        <div class="nav-item theme-toggle" onclick="toggleTheme()" title="Alternar Tema" id="theme-btn">üåô</div>
    </nav>
    
    <div class="container">
        <div class="header">
            <h1>üöî SISTEMA DE RECRUTAMENTO</h1>
            <p>Avalia√ß√£o de Conhecimentos - Pol√≠cia GTA RP</p>
            <div class="progress-counter">
                <span class="counter-text" id="answer-counter">0 de 33 respondidas</span>
                <div class="mini-progress">
                    <div class="mini-progress-fill" id="mini-progress" style="width: 0%"></div>
                </div>
            </div>
        </div>

        <div class="player-info">
            <label>ID:</label>
            <input type="text" id="player-id" placeholder="ID do Player">
            <label>Nome:</label>
            <input type="text" id="player-name" placeholder="Nome do Player">
        </div>

        <form id="quiz-form">
            <!-- ETAPA 1 -->
            <div class="etapa" id="etapa-1">
                <div class="etapa-header">üì° ETAPA 1 ‚Äî C√ìDIGO Q</div>
                <div class="questions-row">
                    <div class="question">
                        <p class="question-text"><span class="question-number">1.</span> O que √© o C√≥digo Q?</p>
                        <div class="correct-answer">Conjunto de c√≥digos usados no r√°dio para agilizar e padronizar a comunica√ß√£o policial.</div>
                        <div class="answer-options">
                            <label class="answer-option option-correct"><input type="radio" name="q1" value="correct">‚úì CERTO</label>
                            <label class="answer-option option-incorrect"><input type="radio" name="q1" value="incorrect">‚úó ERRADO</label>
                        </div>
                    </div>
                    <div class="question">
                        <p class="question-text"><span class="question-number">2.</span> Qual a finalidade do C√≥digo Q?</p>
                        <div class="correct-answer">Evitar r√°dio polu√≠do, garantir sigilo e rapidez nas comunica√ß√µes.</div>
                        <div class="answer-options">
                            <label class="answer-option option-correct"><input type="radio" name="q2" value="correct">‚úì CERTO</label>
                            <label class="answer-option option-incorrect"><input type="radio" name="q2" value="incorrect">‚úó ERRADO</label>
                        </div>
                    </div>
                    <div class="question">
                        <p class="question-text"><span class="question-number">3.</span> O que significa QAP?</p>
                        <div class="correct-answer">Na escuta / aguardando ordens.</div>
                        <div class="answer-options">
                            <label class="answer-option option-correct"><input type="radio" name="q3" value="correct">‚úì CERTO</label>
                            <label class="answer-option option-incorrect"><input type="radio" name="q3" value="incorrect">‚úó ERRADO</label>
                        </div>
                    </div>
                    <div class="question">
                        <p class="question-text"><span class="question-number">4.</span> O que significa QTH?</p>
                        <div class="correct-answer">Localiza√ß√£o atual da viatura ou policial.</div>
                        <div class="answer-options">
                            <label class="answer-option option-correct"><input type="radio" name="q4" value="correct">‚úì CERTO</label>
                            <label class="answer-option option-incorrect"><input type="radio" name="q4" value="incorrect">‚úó ERRADO</label>
                        </div>
                    </div>
                    <div class="question">
                        <p class="question-text"><span class="question-number">5.</span> O que significa QRR?</p>
                        <div class="correct-answer">Ocorr√™ncia grave em andamento, com risco √† vida.</div>
                        <div class="answer-options">
                            <label class="answer-option option-correct"><input type="radio" name="q5" value="correct">‚úì CERTO</label>
                            <label class="answer-option option-incorrect"><input type="radio" name="q5" value="incorrect">‚úó ERRADO</label>
                        </div>
                    </div>
                    <div class="question">
                        <p class="question-text"><span class="question-number">6.</span> O que significa QRV?</p>
                        <div class="correct-answer">√Ä disposi√ß√£o / pronto para agir.</div>
                        <div class="answer-options">
                            <label class="answer-option option-correct"><input type="radio" name="q6" value="correct">‚úì CERTO</label>
                            <label class="answer-option option-incorrect"><input type="radio" name="q6" value="incorrect">‚úó ERRADO</label>
                        </div>
                    </div>
                    <div class="question">
                        <p class="question-text"><span class="question-number">7.</span> Quando o C√≥digo Q deve ser utilizado?</p>
                        <div class="correct-answer">Sempre em comunica√ß√µes via r√°dio operacional.</div>
                        <div class="answer-options">
                            <label class="answer-option option-correct"><input type="radio" name="q7" value="correct">‚úì CERTO</label>
                            <label class="answer-option option-incorrect"><input type="radio" name="q7" value="incorrect">‚úó ERRADO</label>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ETAPA 2 -->
            <div class="etapa" id="etapa-2">
                <div class="etapa-header">üöì ETAPA 2 ‚Äî C√ìDIGO DE PATRULHA</div>
                <div class="questions-row">
                    <div class="question">
                        <p class="question-text"><span class="question-number">8.</span> O que √© patrulhamento ostensivo?</p>
                        <div class="correct-answer">Patrulhamento vis√≠vel para inibir crimes e aumentar a sensa√ß√£o de seguran√ßa.</div>
                        <div class="answer-options">
                            <label class="answer-option option-correct"><input type="radio" name="q8" value="correct">‚úì CERTO</label>
                            <label class="answer-option option-incorrect"><input type="radio" name="q8" value="incorrect">‚úó ERRADO</label>
                        </div>
                    </div>
                    <div class="question">
                        <p class="question-text"><span class="question-number">9.</span> Diferen√ßa entre patrulha preventiva e reativa?</p>
                        <div class="correct-answer">Preventiva age antes do crime; reativa responde ap√≥s ou durante o crime.</div>
                        <div class="answer-options">
                            <label class="answer-option option-correct"><input type="radio" name="q9" value="correct">‚úì CERTO</label>
                            <label class="answer-option option-incorrect"><input type="radio" name="q9" value="incorrect">‚úó ERRADO</label>
                        </div>
                    </div>
                    <div class="question">
                        <p class="question-text"><span class="question-number">10.</span> Quando usar C√≥digo 1?</p>
                        <div class="correct-answer">Deslocamento normal, sem urg√™ncia.</div>
                        <div class="answer-options">
                            <label class="answer-option option-correct"><input type="radio" name="q10" value="correct">‚úì CERTO</label>
                            <label class="answer-option option-incorrect"><input type="radio" name="q10" value="incorrect">‚úó ERRADO</label>
                        </div>
                    </div>
                    <div class="question">
                        <p class="question-text"><span class="question-number">11.</span> Quando usar C√≥digo 2?</p>
                        <div class="correct-answer">Ocorr√™ncia com urg√™ncia moderada.</div>
                        <div class="answer-options">
                            <label class="answer-option option-correct"><input type="radio" name="q11" value="correct">‚úì CERTO</label>
                            <label class="answer-option option-incorrect"><input type="radio" name="q11" value="incorrect">‚úó ERRADO</label>
                        </div>
                    </div>
                    <div class="question">
                        <p class="question-text"><span class="question-number">12.</span> Quando usar C√≥digo 3?</p>
                        <div class="correct-answer">Ocorr√™ncia emergencial com risco √† vida ou crime em andamento.</div>
                        <div class="answer-options">
                            <label class="answer-option option-correct"><input type="radio" name="q12" value="correct">‚úì CERTO</label>
                            <label class="answer-option option-incorrect"><input type="radio" name="q12" value="incorrect">‚úó ERRADO</label>
                        </div>
                    </div>
                    <div class="question">
                        <p class="question-text"><span class="question-number">13.</span> O que indica um acionamento C√≥digo 3?</p>
                        <div class="correct-answer">Prioridade m√°xima e resposta imediata.</div>
                        <div class="answer-options">
                            <label class="answer-option option-correct"><input type="radio" name="q13" value="correct">‚úì CERTO</label>
                            <label class="answer-option option-incorrect"><input type="radio" name="q13" value="incorrect">‚úó ERRADO</label>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ETAPA 3 -->
            <div class="etapa" id="etapa-3">
                <div class="etapa-header">üîç ETAPA 3 ‚Äî C√ìDIGO DE ABORDAGEM</div>
                <div class="questions-row">
                    <div class="question">
                        <p class="question-text"><span class="question-number">14.</span> O que √© uma abordagem policial?</p>
                        <div class="correct-answer">A√ß√£o legal de fiscaliza√ß√£o ou interven√ß√£o policial.</div>
                        <div class="answer-options">
                            <label class="answer-option option-correct"><input type="radio" name="q14" value="correct">‚úì CERTO</label>
                            <label class="answer-option option-incorrect"><input type="radio" name="q14" value="incorrect">‚úó ERRADO</label>
                        </div>
                    </div>
                    <div class="question">
                        <p class="question-text"><span class="question-number">15.</span> Quais os passos b√°sicos da abordagem veicular?</p>
                        <div class="correct-answer">Observa√ß√£o, parada, posicionamento, comandos, identifica√ß√£o e revista (se houver suspeita).</div>
                        <div class="answer-options">
                            <label class="answer-option option-correct"><input type="radio" name="q15" value="correct">‚úì CERTO</label>
                            <label class="answer-option option-incorrect"><input type="radio" name="q15" value="incorrect">‚úó ERRADO</label>
                        </div>
                    </div>
                    <div class="question">
                        <p class="question-text"><span class="question-number">16.</span> Quando a abordagem √© de alto risco?</p>
                        <div class="correct-answer">Suspeita de arma, crime violento ou ve√≠culo com alerta.</div>
                        <div class="answer-options">
                            <label class="answer-option option-correct"><input type="radio" name="q16" value="correct">‚úì CERTO</label>
                            <label class="answer-option option-incorrect"><input type="radio" name="q16" value="incorrect">‚úó ERRADO</label>
                        </div>
                    </div>
                    <div class="question">
                        <p class="question-text"><span class="question-number">17.</span> Qual o posicionamento correto da viatura?</p>
                        <div class="correct-answer">Atr√°s e levemente deslocada para a esquerda.</div>
                        <div class="answer-options">
                            <label class="answer-option option-correct"><input type="radio" name="q17" value="correct">‚úì CERTO</label>
                            <label class="answer-option option-incorrect"><input type="radio" name="q17" value="incorrect">‚úó ERRADO</label>
                        </div>
                    </div>
                    <div class="question">
                        <p class="question-text"><span class="question-number">18.</span> O policial pode revistar um cidad√£o?</p>
                        <div class="correct-answer">Sim, quando houver fundada suspeita ou risco √† seguran√ßa.</div>
                        <div class="answer-options">
                            <label class="answer-option option-correct"><input type="radio" name="q18" value="correct">‚úì CERTO</label>
                            <label class="answer-option option-incorrect"><input type="radio" name="q18" value="incorrect">‚úó ERRADO</label>
                        </div>
                    </div>
                    <div class="question">
                        <p class="question-text"><span class="question-number">19.</span> O que fazer se o abordado n√£o obedecer comandos?</p>
                        <div class="correct-answer">Escalonar o uso da for√ßa de forma proporcional e legal.</div>
                        <div class="answer-options">
                            <label class="answer-option option-correct"><input type="radio" name="q19" value="correct">‚úì CERTO</label>
                            <label class="answer-option option-incorrect"><input type="radio" name="q19" value="incorrect">‚úó ERRADO</label>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ETAPA 4 -->
            <div class="etapa" id="etapa-4">
                <div class="etapa-header">‚öñÔ∏è ETAPA 4 ‚Äî LEI DE MIRANDA</div>
                <div class="questions-row">
                    <div class="question">
                        <p class="question-text"><span class="question-number">20.</span> O que √© a Lei de Miranda?</p>
                        <div class="correct-answer">Direitos que devem ser informados ao preso.</div>
                        <div class="answer-options">
                            <label class="answer-option option-correct"><input type="radio" name="q20" value="correct">‚úì CERTO</label>
                            <label class="answer-option option-incorrect"><input type="radio" name="q20" value="incorrect">‚úó ERRADO</label>
                        </div>
                    </div>
                    <div class="question">
                        <p class="question-text"><span class="question-number">21.</span> Quando deve ser aplicada?</p>
                        <div class="correct-answer">No momento da pris√£o, antes do interrogat√≥rio.</div>
                        <div class="answer-options">
                            <label class="answer-option option-correct"><input type="radio" name="q21" value="correct">‚úì CERTO</label>
                            <label class="answer-option option-incorrect"><input type="radio" name="q21" value="incorrect">‚úó ERRADO</label>
                        </div>
                    </div>
                    <div class="question">
                        <p class="question-text"><span class="question-number">22.</span> Quais direitos devem ser informados?</p>
                        <div class="correct-answer">Permanecer em sil√™ncio, advogado, e que tudo pode ser usado contra ele.</div>
                        <div class="answer-options">
                            <label class="answer-option option-correct"><input type="radio" name="q22" value="correct">‚úì CERTO</label>
                            <label class="answer-option option-incorrect"><input type="radio" name="q22" value="incorrect">‚úó ERRADO</label>
                        </div>
                    </div>
                    <div class="question">
                        <p class="question-text"><span class="question-number">23.</span> O que acontece se n√£o for lida?</p>
                        <div class="correct-answer">O depoimento pode ser invalidado.</div>
                        <div class="answer-options">
                            <label class="answer-option option-correct"><input type="radio" name="q23" value="correct">‚úì CERTO</label>
                            <label class="answer-option option-incorrect"><input type="radio" name="q23" value="incorrect">‚úó ERRADO</label>
                        </div>
                    </div>
                    <div class="question">
                        <p class="question-text"><span class="question-number">24.</span> Deve ser lida em toda abordagem?</p>
                        <div class="correct-answer">N√£o. Apenas em caso de pris√£o.</div>
                        <div class="answer-options">
                            <label class="answer-option option-correct"><input type="radio" name="q24" value="correct">‚úì CERTO</label>
                            <label class="answer-option option-incorrect"><input type="radio" name="q24" value="incorrect">‚úó ERRADO</label>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ETAPA 5 -->
            <div class="etapa" id="etapa-5">
                <div class="etapa-header">üìª ETAPA 5 ‚Äî R√ÅDIO E COMUNICA√á√ÉO</div>
                <div class="questions-row">
                    <div class="question">
                        <p class="question-text"><span class="question-number">25.</span> Como iniciar uma comunica√ß√£o no r√°dio?</p>
                        <div class="correct-answer">Identificando quem chama, quem responde e a mensagem.</div>
                        <div class="answer-options">
                            <label class="answer-option option-correct"><input type="radio" name="q25" value="correct">‚úì CERTO</label>
                            <label class="answer-option option-incorrect"><input type="radio" name="q25" value="incorrect">‚úó ERRADO</label>
                        </div>
                    </div>
                    <div class="question">
                        <p class="question-text"><span class="question-number">26.</span> O que significa "r√°dio limpo"?</p>
                        <div class="correct-answer">Uso exclusivo para comunica√ß√µes operacionais.</div>
                        <div class="answer-options">
                            <label class="answer-option option-correct"><input type="radio" name="q26" value="correct">‚úì CERTO</label>
                            <label class="answer-option option-incorrect"><input type="radio" name="q26" value="incorrect">‚úó ERRADO</label>
                        </div>
                    </div>
                    <div class="question">
                        <p class="question-text"><span class="question-number">27.</span> O que n√£o deve ser falado no r√°dio?</p>
                        <div class="correct-answer">Opini√µes pessoais, discuss√µes e informa√ß√µes desnecess√°rias.</div>
                        <div class="answer-options">
                            <label class="answer-option option-correct"><input type="radio" name="q27" value="correct">‚úì CERTO</label>
                            <label class="answer-option option-incorrect"><input type="radio" name="q27" value="incorrect">‚úó ERRADO</label>
                        </div>
                    </div>
                    <div class="question">
                        <p class="question-text"><span class="question-number">28.</span> Como solicitar apoio via r√°dio?</p>
                        <div class="correct-answer">Informando QTH, c√≥digo, tipo de ocorr√™ncia e riscos.</div>
                        <div class="answer-options">
                            <label class="answer-option option-correct"><input type="radio" name="q28" value="correct">‚úì CERTO</label>
                            <label class="answer-option option-incorrect"><input type="radio" name="q28" value="incorrect">‚úó ERRADO</label>
                        </div>
                    </div>
                    <div class="question">
                        <p class="question-text"><span class="question-number">29.</span> O que informar em uma persegui√ß√£o?</p>
                        <div class="correct-answer">Localiza√ß√£o, dire√ß√£o, ve√≠culo, placa e n√∫mero de suspeitos.</div>
                        <div class="answer-options">
                            <label class="answer-option option-correct"><input type="radio" name="q29" value="correct">‚úì CERTO</label>
                            <label class="answer-option option-incorrect"><input type="radio" name="q29" value="incorrect">‚úó ERRADO</label>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ETAPA 6 -->
            <div class="etapa" id="etapa-6">
                <div class="etapa-header">üö® ETAPA 6 ‚Äî SITUA√á√ÉO PR√ÅTICA RP</div>
                <div class="questions-row">
                    <div class="question">
                        <p class="question-text"><span class="question-number">30.</span> Abordagem de rotina com tentativa de fuga: como agir?</p>
                        <div class="correct-answer">Ordem verbal, comunica√ß√£o via r√°dio, conten√ß√£o, uso progressivo da for√ßa e pris√£o.</div>
                        <div class="answer-options">
                            <label class="answer-option option-correct"><input type="radio" name="q30" value="correct">‚úì CERTO</label>
                            <label class="answer-option option-incorrect"><input type="radio" name="q30" value="incorrect">‚úó ERRADO</label>
                        </div>
                    </div>
                    <div class="question">
                        <p class="question-text"><span class="question-number">31.</span> Escutou um QRR no r√°dio: o que fazer?</p>
                        <div class="correct-answer">Confirmar QTH, entrar em C√≥digo 3 e prestar apoio.</div>
                        <div class="answer-options">
                            <label class="answer-option option-correct"><input type="radio" name="q31" value="correct">‚úì CERTO</label>
                            <label class="answer-option option-incorrect"><input type="radio" name="q31" value="incorrect">‚úó ERRADO</label>
                        </div>
                    </div>
                    <div class="question">
                        <p class="question-text"><span class="question-number">32.</span> Parceiro atira sem justificativa: qual conduta?</p>
                        <div class="correct-answer">Garantir seguran√ßa, preservar local e comunicar a supervis√£o.</div>
                        <div class="answer-options">
                            <label class="answer-option option-correct"><input type="radio" name="q32" value="correct">‚úì CERTO</label>
                            <label class="answer-option option-incorrect"><input type="radio" name="q32" value="incorrect">‚úó ERRADO</label>
                        </div>
                    </div>
                    <div class="question">
                        <p class="question-text"><span class="question-number">33.</span> Civil discute regras durante abordagem: como proceder?</p>
                        <div class="correct-answer">Manter postura profissional, refor√ßar comandos e concluir a a√ß√£o.</div>
                        <div class="answer-options">
                            <label class="answer-option option-correct"><input type="radio" name="q33" value="correct">‚úì CERTO</label>
                            <label class="answer-option option-incorrect"><input type="radio" name="q33" value="incorrect">‚úó ERRADO</label>
                        </div>
                    </div>
                </div>
            </div>

            <div class="btn-container">
                <button type="button" class="btn btn-primary" onclick="checkAnswers()">üìä RESULTADO</button>
                <button type="button" class="btn btn-secondary" onclick="resetQuiz()">üîÑ REINICIAR</button>
            </div>
        </form>

        <div class="result-container" id="result-container">
            <div class="result-header">
                <h2 id="result-status"></h2>
                <p id="player-result-info" style="color:#8b949e;margin-top:5px;"></p>
            </div>
            <div class="stats-grid">
                <div class="stat-card stat-correct"><div class="stat-value" id="correct-count">0</div><div class="stat-label">Acertos</div></div>
                <div class="stat-card stat-incorrect"><div class="stat-value" id="incorrect-count">0</div><div class="stat-label">Erros</div></div>
                <div class="stat-card stat-percentage"><div class="stat-value" id="percentage">0%</div><div class="stat-label">Aproveitamento</div></div>
            </div>
            <div class="progress-bar"><div class="progress-fill" id="progress-fill">0%</div></div>
            <h4 style="color:#58a6ff;margin:10px 0 8px;">üìã Resumo por Quest√£o</h4>
            <div class="review-grid" id="review-list"></div>
            <div class="btn-container">
                <button type="button" class="btn btn-pdf" onclick="exportPDF()">üìÑ EXPORTAR PDF</button>
                <button type="button" class="btn btn-secondary" onclick="resetQuiz()">üîÑ NOVA AVALIA√á√ÉO</button>
            </div>
        </div>

        <div class="credits">Desenvolvido por <span>FELTZER</span></div>
    </div>

    <script>
        const totalQuestions = 33;
        
        // Confetti celebration
        function launchConfetti() {
            const container = document.getElementById('confetti-container');
            const colors = ['#3fb950', '#c9a227', '#4a9eff', '#ff7b72', '#f0883e', '#56d364', '#ffd700'];
            const shapes = ['square', 'circle'];
            
            for (let i = 0; i < 150; i++) {
                setTimeout(() => {
                    const confetti = document.createElement('div');
                    confetti.className = 'confetti';
                    confetti.style.left = Math.random() * 100 + '%';
                    confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                    confetti.style.borderRadius = shapes[Math.floor(Math.random() * shapes.length)] === 'circle' ? '50%' : '2px';
                    confetti.style.width = (Math.random() * 10 + 8) + 'px';
                    confetti.style.height = (Math.random() * 10 + 8) + 'px';
                    confetti.style.animationDuration = (Math.random() * 2 + 3) + 's';
                    confetti.style.animationDelay = (Math.random() * 0.5) + 's';
                    container.appendChild(confetti);
                    
                    setTimeout(() => confetti.remove(), 5000);
                }, i * 20);
            }
        }
        
        // Theme toggle
        function toggleTheme() {
            const body = document.body;
            const btn = document.getElementById('theme-btn');
            if (body.getAttribute('data-theme') === 'light') {
                body.removeAttribute('data-theme');
                btn.textContent = 'üåô';
                localStorage.setItem('theme', 'dark');
            } else {
                body.setAttribute('data-theme', 'light');
                btn.textContent = '‚òÄÔ∏è';
                localStorage.setItem('theme', 'light');
            }
        }
        
        // Load saved theme
        if (localStorage.getItem('theme') === 'light') {
            document.body.setAttribute('data-theme', 'light');
            document.getElementById('theme-btn').textContent = '‚òÄÔ∏è';
        }
        
        // Navigation
        function scrollToEtapa(num) {
            document.getElementById('etapa-' + num).scrollIntoView({ behavior: 'smooth' });
            updateActiveNav(num);
        }
        
        function scrollToResult() {
            document.getElementById('result-container').scrollIntoView({ behavior: 'smooth' });
        }
        
        function updateActiveNav(num) {
            document.querySelectorAll('.nav-item').forEach((item, i) => {
                if (i < 6) item.classList.remove('active');
            });
            if (num >= 1 && num <= 6) {
                document.querySelectorAll('.nav-item')[num - 1].classList.add('active');
            }
        }
        
        // Update progress counter
        function updateProgress() {
            let answered = 0;
            for (let i = 1; i <= totalQuestions; i++) {
                if (document.querySelector(`input[name="q${i}"]:checked`)) answered++;
            }
            document.getElementById('answer-counter').textContent = `${answered} de ${totalQuestions} respondidas`;
            document.getElementById('mini-progress').style.width = `${(answered / totalQuestions) * 100}%`;
            
            // Mark questions as answered
            document.querySelectorAll('.question').forEach((q, i) => {
                const input = q.querySelector('input:checked');
                if (input) q.classList.add('answered');
                else q.classList.remove('answered');
            });
        }
        
        document.querySelectorAll('.answer-option input').forEach(r => {
            r.addEventListener('change', function() {
                const p = this.closest('.answer-options');
                p.querySelectorAll('.answer-option').forEach(o => o.classList.remove('selected-correct','selected-incorrect'));
                this.closest('.answer-option').classList.add(this.value === 'correct' ? 'selected-correct' : 'selected-incorrect');
                updateProgress();
                
                // Verificar se a etapa atual foi completada
                const etapa = this.closest('.etapa');
                checkEtapaCompletion(etapa);
            });
        });
        
        // Verifica se todas as perguntas de uma etapa foram respondidas
        function checkEtapaCompletion(etapa) {
            const questions = etapa.querySelectorAll('.question');
            const answered = etapa.querySelectorAll('.question input:checked').length;
            
            if (answered === questions.length) {
                // Etapa completa! Ir para a pr√≥xima
                const etapaId = etapa.id;
                const etapaNum = parseInt(etapaId.split('-')[1]);
                
                if (etapaNum < 6) {
                    // Mostrar feedback visual
                    etapa.style.borderColor = 'var(--success)';
                    etapa.style.boxShadow = '0 0 30px rgba(34, 197, 94, 0.3)';
                    
                    // Scroll para pr√≥xima etapa ap√≥s breve delay
                    setTimeout(() => {
                        const nextEtapa = document.getElementById('etapa-' + (etapaNum + 1));
                        if (nextEtapa) {
                            nextEtapa.scrollIntoView({ behavior: 'smooth', block: 'start' });
                            updateActiveNav(etapaNum + 1);
                        }
                    }, 600);
                } else if (etapaNum === 6) {
                    // √öltima etapa conclu√≠da - mostrar indica√ß√£o visual
                    etapa.style.borderColor = 'var(--success)';
                    etapa.style.boxShadow = '0 0 30px rgba(34, 197, 94, 0.3)';
                    
                    // Piscar o bot√£o de resultado
                    const btnResult = document.querySelector('.btn-primary');
                    btnResult.style.animation = 'pulse 0.5s ease 3';
                    setTimeout(() => {
                        btnResult.scrollIntoView({ behavior: 'smooth', block: 'center' });
                    }, 600);
                }
            }
        }
        
        // Intersection Observer for nav highlighting
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    const id = entry.target.id;
                    if (id && id.startsWith('etapa-')) {
                        updateActiveNav(parseInt(id.split('-')[1]));
                    }
                }
            });
        }, { threshold: 0.3 });
        
        document.querySelectorAll('.etapa').forEach(etapa => observer.observe(etapa));

        function checkAnswers() {
            const id = document.getElementById('player-id').value.trim();
            const name = document.getElementById('player-name').value.trim();
            if (!id || !name) { alert('Preencha ID e Nome!'); return; }

            let c = 0, e = 0, n = 0;
            const review = document.getElementById('review-list');
            review.innerHTML = '';

            for (let i = 1; i <= totalQuestions; i++) {
                const sel = document.querySelector(`input[name="q${i}"]:checked`);
                const val = sel ? sel.value : null;
                let st, cls, txt;
                if (val === 'correct') { c++; st='correct'; cls='correct'; txt='‚úì'; }
                else if (val === 'incorrect') { e++; st='incorrect'; cls='incorrect'; txt='‚úó'; }
                else { n++; st='not-answered'; cls='not-answered'; txt='‚Äî'; }
                review.innerHTML += `<div class="review-item ${st}"><span>Q${i}</span><span class="review-status ${cls}">${txt}</span></div>`;
            }

            const ans = c + e;
            const pct = ans > 0 ? Math.round((c / ans) * 100) : 0;
            const approved = pct >= 70 && n === 0;

            document.getElementById('correct-count').textContent = c;
            document.getElementById('incorrect-count').textContent = e;
            document.getElementById('percentage').textContent = pct + '%';
            
            const pf = document.getElementById('progress-fill');
            pf.style.width = pct + '%';
            pf.textContent = pct + '%';

            const rs = document.getElementById('result-status');
            if (n > 0) { rs.textContent = '‚ö†Ô∏è INCOMPLETO'; rs.className = ''; rs.style.color = '#f0883e'; }
            else if (approved) { 
                rs.textContent = '‚úÖ APROVADO'; 
                rs.className = 'result-approved'; 
                rs.style.color = ''; 
                launchConfetti(); // üéâ Celebra√ß√£o!
            }
            else { rs.textContent = '‚ùå REPROVADO'; rs.className = 'result-failed'; rs.style.color = ''; }

            document.getElementById('player-result-info').textContent = `ID: ${id} | ${name} | ${new Date().toLocaleDateString('pt-BR')}`;
            document.getElementById('result-container').style.display = 'block';
            document.getElementById('result-container').scrollIntoView({ behavior: 'smooth' });
        }

        function resetQuiz() {
            document.getElementById('quiz-form').reset();
            document.getElementById('player-id').value = '';
            document.getElementById('player-name').value = '';
            document.getElementById('result-container').style.display = 'none';
            document.querySelectorAll('.answer-option').forEach(o => o.classList.remove('selected-correct','selected-incorrect'));
            document.querySelectorAll('.question').forEach(q => q.classList.remove('answered'));
            updateProgress();
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function exportPDF() {
            const id = document.getElementById('player-id').value.trim();
            const name = document.getElementById('player-name').value.trim();
            const c = document.getElementById('correct-count').textContent;
            const e = document.getElementById('incorrect-count').textContent;
            const pct = document.getElementById('percentage').textContent;
            const st = document.getElementById('result-status').textContent;

            const isApproved = st.includes('APROVADO');
            const isIncomplete = st.includes('INCOMPLETO');
            
            // Gerar resumo por quest√£o
            let reviewHTML = '';
            for (let i = 1; i <= totalQuestions; i++) {
                const sel = document.querySelector(`input[name="q${i}"]:checked`);
                const val = sel ? sel.value : null;
                let cls, txt;
                if (val === 'correct') { cls = 'correct'; txt = '‚úì'; }
                else if (val === 'incorrect') { cls = 'incorrect'; txt = '‚úó'; }
                else { cls = 'not-answered'; txt = '‚Äî'; }
                reviewHTML += `<div class="review-item ${cls}"><span>Q${i}</span><span class="status">${txt}</span></div>`;
            }
            
            // Criar janela para impress√£o/PDF
            const printWindow = window.open('', '_blank');
            printWindow.document.write(`
<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Relat√≥rio - ${name}</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: Arial, sans-serif; background: #fff; color: #000; padding: 40px; }
        .header { text-align: center; border-bottom: 4px solid #3b82f6; padding-bottom: 20px; margin-bottom: 30px; }
        .header h1 { color: #1e293b; font-size: 28px; margin-bottom: 8px; }
        .header p { color: #64748b; font-size: 14px; }
        .info-box { background: #f1f5f9; padding: 20px; border-radius: 10px; margin-bottom: 30px; border-left: 4px solid #3b82f6; }
        .info-box p { margin: 8px 0; font-size: 16px; color: #1e293b; }
        .stats { display: flex; justify-content: center; gap: 20px; margin-bottom: 30px; }
        .stat-box { flex: 1; text-align: center; padding: 25px 15px; border-radius: 10px; border: 2px solid; }
        .stat-box.green { background: #f0fdf4; border-color: #22c55e; }
        .stat-box.red { background: #fef2f2; border-color: #ef4444; }
        .stat-box.blue { background: #eff6ff; border-color: #3b82f6; }
        .stat-value { font-size: 48px; font-weight: bold; line-height: 1; }
        .stat-value.green { color: #16a34a; }
        .stat-value.red { color: #dc2626; }
        .stat-value.blue { color: #2563eb; }
        .stat-label { color: #64748b; font-size: 12px; margin-top: 10px; text-transform: uppercase; font-weight: bold; letter-spacing: 1px; }
        .result-box { text-align: center; padding: 30px; border-radius: 10px; margin: 30px 0; border: 3px solid; }
        .result-box.approved { background: #dcfce7; border-color: #22c55e; }
        .result-box.incomplete { background: #fef9c3; border-color: #eab308; }
        .result-box.failed { background: #fee2e2; border-color: #ef4444; }
        .result-box h2 { font-size: 32px; font-weight: bold; margin: 0; }
        .result-box.approved h2 { color: #15803d; }
        .result-box.incomplete h2 { color: #a16207; }
        .result-box.failed h2 { color: #dc2626; }
        .min-info { text-align: center; color: #64748b; font-size: 14px; margin: 20px 0; }
        .review-section { margin: 30px 0; }
        .review-section h3 { color: #3b82f6; font-size: 16px; margin-bottom: 15px; border-bottom: 2px solid #e2e8f0; padding-bottom: 10px; }
        .review-grid { display: flex; flex-wrap: wrap; gap: 8px; }
        .review-item { display: inline-flex; align-items: center; gap: 8px; padding: 8px 14px; border-radius: 8px; font-size: 14px; font-weight: 600; border: 2px solid; }
        .review-item.correct { background: #f0fdf4; border-color: #22c55e; }
        .review-item.incorrect { background: #fef2f2; border-color: #ef4444; }
        .review-item.not-answered { background: #fef9c3; border-color: #eab308; }
        .review-item .status { font-weight: bold; }
        .review-item.correct .status { color: #16a34a; }
        .review-item.incorrect .status { color: #dc2626; }
        .review-item.not-answered .status { color: #ca8a04; }
        .footer { text-align: center; margin-top: 50px; padding-top: 20px; border-top: 2px solid #e2e8f0; }
        .footer p { color: #94a3b8; font-size: 12px; }
        .footer strong { color: #f59e0b; font-size: 16px; }
        @media print { body { padding: 20px; } }
    </style>
</head>
<body>
    <div class="header">
        <h1>üöî RELAT√ìRIO DE RECRUTAMENTO</h1>
        <p>Sistema de Avalia√ß√£o - Pol√≠cia GTA RP</p>
    </div>
    
    <div class="info-box">
        <p><strong>ID:</strong> ${id}</p>
        <p><strong>Nome:</strong> ${name}</p>
        <p><strong>Data:</strong> ${new Date().toLocaleDateString('pt-BR')} √†s ${new Date().toLocaleTimeString('pt-BR')}</p>
    </div>
    
    <div class="stats">
        <div class="stat-box green">
            <div class="stat-value green">${c}</div>
            <div class="stat-label">Acertos</div>
        </div>
        <div class="stat-box red">
            <div class="stat-value red">${e}</div>
            <div class="stat-label">Erros</div>
        </div>
        <div class="stat-box blue">
            <div class="stat-value blue">${pct}</div>
            <div class="stat-label">Aproveitamento</div>
        </div>
    </div>
    
    <div class="result-box ${isApproved ? 'approved' : isIncomplete ? 'incomplete' : 'failed'}">
        <h2>${st}</h2>
    </div>
    
    <p class="min-info">M√≠nimo para aprova√ß√£o: <strong>70%</strong></p>
    
    <div class="review-section">
        <h3>üìã Resumo por Quest√£o</h3>
        <div class="review-grid">
            ${reviewHTML}
        </div>
    </div>
    
    <div class="footer">
        <p>Desenvolvido por <strong>FELTZER</strong></p>
    </div>
    
    <scr` + `ipt>
        window.onload = function() {
            window.print();
        };
    </scr` + `ipt>
</body>
</html>`);
            printWindow.document.close();
        }
    </script>
</body>
</html>
